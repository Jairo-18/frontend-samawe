<article class="brand-content-center">
  <article
    class="w-[90%] xl:w-[70%] lg:w-[90%] h-max md:h-full py-7 md:py-7 px-5 md:px-7 my-5 rounded-2xl border border-[#06a606]"
  >
    <button
      mat-stroked-button
      routerLink="/products/product/list"
      matTooltip="Volver"
      color="primary"
      class="top-0 left-0 border-none"
    >
      <mat-icon class="flex justify-center items-center">arrow_back</mat-icon>
      Volver
    </button>
    <section
      class="w-full flex row pb-2 mb-3 md:mb-5 justify-content-between mx-0 mt-4 border-b-[2px] border-b-[#06a606]"
    >
      <span class="text-2xl md:text-3xl">
        {{ isEditMode ? 'Editar producto' : 'Crear producto' }}</span
      >
    </section>
    <div class="mb-4">
      <span class="brand-text-body-m text-black-50 fw-semibold">
        {{
          isEditMode
            ? 'Edita los campos que desees'
            : 'Aquí puedes crear productos con sus respectivas categorias'
        }}
      </span>
    </div>

    <form [formGroup]="productForm" class="flex flex-col">
      <div class="flex flex-col md:flex-row gap-x-10 gap-y-[25px] md:gap-y-0">
        <section class="flex flex-col w-full md:w-[50%] gap-[25px] md:gap-2">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Categoría</mat-label>
            <mat-select formControlName="categoryTypeId" required>
              <mat-option value="" disabled selected
                >Seleccione la categoría</mat-option
              >
              <mat-option
                *ngFor="let category of categoryType"
                [value]="category.categoryTypeId"
              >
                {{ category.name }}
              </mat-option>
            </mat-select>
            <mat-icon matPrefix>category</mat-icon>
            <mat-error
              *ngIf="productForm.get('categoryTypeId')?.hasError('required')"
            >
              Categoría requerido
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Código del producto</mat-label>
            <mat-icon matPrefix>qr_code</mat-icon>
            <input matInput formControlName="code" required />
            <mat-error *ngIf="productForm.get('code')?.hasError('required')">
              Código del producto requerido
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Nombre del producto</mat-label>
            <mat-icon matPrefix>inventory</mat-icon>
            <input matInput formControlName="name" required />
            <mat-error *ngIf="productForm.get('name')?.hasError('required')">
              Nombre del producto requerido
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Descripción</mat-label>
            <textarea
              matInput
              formControlName="description"
              rows="3"
              #descTextarea
              maxlength="500"
            ></textarea>
            <mat-icon matPrefix>notes</mat-icon>
            <mat-hint align="end">
              {{ descTextarea.value ? descTextarea.value.length : 0 }}/250
            </mat-hint>
          </mat-form-field>
        </section>

        <section class="flex flex-col w-full md:w-[50%] gap-[25px] md:gap-2">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Unidades</mat-label>
            <input
              matInput
              formControlName="amount"
              type="number"
              step="0.01"
              class="text-right"
              required
            />
            <mat-icon matSuffix>numbers</mat-icon>
            <mat-error *ngIf="productForm.get('amount')">
              Unidades requeridas
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Precio de compra</mat-label>
            <input
              matInput
              formControlName="priceBuy"
              required
              appCurrencyFormat
              class="text-right"
            />
            <mat-icon matSuffix>shopping_cart </mat-icon>
            <mat-error
              *ngIf="productForm.get('priceBuy')?.hasError('required')"
            >
              Precio de compra requerido
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Precio de venta</mat-label>
            <input
              matInput
              class="text-right"
              formControlName="priceSale"
              appCurrencyFormat
              required
            />
            <mat-icon matSuffix>attach_money</mat-icon>
            <mat-error
              *ngIf="productForm.get('priceSale')?.hasError('required')"
            >
              Precio de venta requerido
            </mat-error>
          </mat-form-field>
        </section>
      </div>

      <section
        actions
        class="w-full h-full items-end justify-end flex text-sm md:text-base"
      >
        <div class="w-full md:w-[25%]">
          <button mat-fab extended="true" class="!w-full" (click)="save()">
            {{ isEditMode ? 'Guardar cambios' : 'Crear Producto' }}
          </button>
        </div>
      </section>
    </form>
  </article>
</article>
