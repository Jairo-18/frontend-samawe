<article class="flex flex-col h-full justify-center m-4 md:m-0">
  <div>
    <span class="text-base md:text-xl font-extrabold">Resumen de Factura</span>
  </div>
  <div class="flex flex-col">
    @if (invoiceData.invoiceType.code === 'FC') {
      <span class="font-bold text-xs md:text-base">Nombre del Proveedor</span>
    } @else {
      <span class="font-bold text-xs md:text-base">Nombre del Cliente</span>
    }
    <div
      class="w-full rounded-lg border border-[#06a606] px-2 py-2 text-xs md:text-base mt-1"
    >
      {{ invoiceData.user.firstName || '' }}
      {{ invoiceData.user.lastName || '' }}
    </div>
  </div>
  <div class="border border-[#06a606] w-full h-[1px] my-6"></div>
  <div class="flex content-between">
    <div class="flex justify-start w-[50%]">
      <span class="font-bold text-xs md:text-base">Tipo de pago:</span>
    </div>
    <div class="flex justify-end w-[50%]">
      <span class="text-xs md:text-base"
        >{{ invoiceData.payType?.name || '' }}
      </span>
    </div>
  </div>
  <div class="flex content-between">
    <div class="flex justify-start w-[50%]">
      <span class="font-bold text-xs md:text-base">Estado de pago:</span>
    </div>
    <div class="flex justify-end w-[50%]">
      <span
        class="font-medium text-xs md:text-base"
        [ngClass]="{
          'text-green-600':
            invoiceData.paidType?.name === 'Pagado' ||
            invoiceData.paidType?.name === 'PAGADO' ||
            invoiceData.paidType?.name === 'RESERVADO - PAGADO' ||
            invoiceData.paidType?.name === 'Reservado - Pagado',
          'text-red-600':
            invoiceData.paidType?.name === 'PENDIENTE' ||
            invoiceData.paidType?.name === 'Pendiente' ||
            invoiceData.paidType?.name === 'RESERVADO - PENDIENTE' ||
            invoiceData.paidType?.name === 'Reservado - Pendiente'
        }"
        >{{ invoiceData.paidType?.name || '' }}
      </span>
    </div>
  </div>
  <div class="flex content-between">
    <div class="flex justify-start w-[50%]">
      <span class="font-bold text-xs md:text-base">Factura #:</span>
    </div>
    <div class="flex justify-end w-[50%]">
      <span class="text-xs md:text-base">{{
        invoiceData.invoiceType.code || ''
      }}</span>
      <span> - </span>
      <span class="text-xs md:text-base">{{ invoiceData.code || '' }}</span>
    </div>
  </div>
  <div class="flex content-between">
    <div class="flex justify-start w-[50%]">
      <span class="font-bold text-xs md:text-base">Subtotal:</span>
    </div>
    <div class="flex justify-end w-[50%]">
      <span class="text-xs md:text-base">{{
        invoiceData.subtotalWithoutTax ?? 0 | formatCop
      }}</span>
    </div>
  </div>
  <div class="border border-[#06a606] w-full h-[1px] my-6"></div>
  <div class="flex content-between">
    <div class="flex justify-start w-[50%]">
      <span class="font-bold text-xs md:text-base">Impuesto:</span>
    </div>
    <div class="flex justify-end w-[50%]">
      <span class="text-xs md:text-base">
        {{ invoiceData.totalTaxes ?? 0 | formatCop }}
      </span>
    </div>
  </div>
  <div class="flex content-between">
    <div class="flex justify-start w-[50%]">
      <span class="font-bold text-xs md:text-base">Total:</span>
    </div>
    <div class="flex justify-end w-[50%]">
      <span class="font-medium text-[#06a606] text-xs md:text-base">{{
        invoiceData.total ?? 0 | formatCop
      }}</span>
    </div>
  </div>
  <div class="flex content-between">
    <div class="flex justify-start w-[50%]">
      <span class="font-bold text-xs md:text-base">Total Pagado:</span>
    </div>
    <div class="flex justify-end w-[50%]">
      <span class="font-medium text-blue-600 text-xs md:text-base">{{
        paidTotal | formatCop
      }}</span>
    </div>
  </div>
  <div class="flex content-between">
    <div class="flex justify-start w-[50%]">
      <span class="font-bold text-xs md:text-base">Pendiente por Pagar:</span>
    </div>
    <div class="flex justify-end w-[50%]">
      <span class="font-medium text-red-600 text-xs md:text-base">{{
        pendingAmount | formatCop
      }}</span>
    </div>
  </div>
  <div class="flex w-full mt-2">
    <button
      mat-stroked-button
      class="!w-full !rounded-lg"
      [color]="allPaid ? 'warn' : 'primary'"
      (click)="toggleAll()"
    >
      {{ allPaid ? 'Marcar todo como pendiente' : 'Marcar todo como pagado' }}
    </button>
  </div>
  @if (invoiceData.cash && invoiceData.cash > 0) {
    <div class="border border-[#06a606] w-full h-[1px] my-6"></div>
    <div class="flex content-between">
      <div class="flex justify-start w-[50%]">
        <span class="font-bold text-xs md:text-base">Efectivo:</span>
      </div>
      <div class="flex justify-end w-[50%]">
        <span class="text-[#06a606] font-medium text-xs md:text-base">
          {{ invoiceData.cash || '' | formatCop }}
        </span>
      </div>
    </div>
  }
  @if (invoiceData.transfer && invoiceData.transfer > 0) {
    <div class="flex content-between">
      <div class="flex justify-start w-[50%]">
        <span class="font-bold text-xs md:text-base">Transferencia:</span>
      </div>
      <div class="flex justify-end w-[50%]">
        <span class="text-[#06a606] font-medium text-xs md:text-base">
          {{ invoiceData.transfer || '' | formatCop }}
        </span>
      </div>
    </div>
  }
  <div class="border border-[#06a606] w-full h-[1px] my-6"></div>
  <div class="flex flex-col">
    <div class="flex justify-start w-full">
      <span class="font-bold text-xs md:text-base">Observaciones</span>
    </div>
    <div
      class="flex justify-start w-full p-1 border border-[#06a606] rounded-lg px-2 py-2 mt-1"
    >
      <span class="font-medium text-[#06a606] text-xs md:text-base">{{
        invoiceData.observations || 'NO HAY OBSERVACIONES'
      }}</span>
    </div>
  </div>
  <div class="my-2">
    <span class="text-xs md:text-base">Los precios incluyen impuestos</span>
  </div>
  <section class="flex flex-col gap-y-2">
    <div class="flex">
      <button
        mat-fab
        extended="true"
        class="!w-full !rounded-lg"
        (click)="onEdit()"
      >
        Editar factura
      </button>
    </div>
    <div class="hidden md:flex">
      <button
        class="!w-full !rounded-lg"
        mat-stroked-button
        extended="true"
        (click)="onDownload()"
      >
        Descargar PDF
      </button>
    </div>
    <div class="flex md:hidden">
      <button
        class="!w-full !rounded-lg"
        mat-fab
        extended="true"
        (click)="onDownload()"
      >
        Descargar PDF
      </button>
    </div>
  </section>
</article>

